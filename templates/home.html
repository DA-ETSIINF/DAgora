{% extends 'base.html' %}
{% load static %}
{% block content %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <link rel="stylesheet" type="text/css" href="{% static 'css/home.css' %}"/>
    <div id="banner">
        <img id="logo" src="{% static 'logos/LogoDA.png' %}" width="250" height="94">
    </div>

    <div id="header">
        <div id="homeButton" class="headerButton">
            <a href="{% url 'home' %}">Home</a>
        </div>
        <div id="homeButton" class="headerButton">
            <a href="{% url 'userlist' %}">User List</a>
        </div>
        {%if user.userprofile.can_create_meeting %}
        <div id="homeButton" class="headerButton">
            <a href="{% url 'create_new_meeting' %}">Create Reunion</a>
        </div>
        {%endif%}

        <div class="headerButton"><a href="{% url 'logout' %}">Log Out</a></div>
    </div>
    <div id="mobile_header">
        <div id="homeButton" class="mobileHeaderButton">
            <a href="{%url 'home'%}"><img id="home_icon" src="{% static 'logos/home_icon.png' %}" height="30"></a>
        </div>
        <div id="dropdown_menu" class="mobileHeaderButton">
            <div id="dropdown_button"><img id="dropdown_menu_icon" src="{% static 'logos/dropdown_menu_icon.png' %}" height="30"></div>
            <div id="dropdown_content">
                <a href="{% url 'home' %}">Home</a>
                <a href="{% url 'userlist' %}">User List</a>
                {%if user.userprofile.can_create_meeting %}
                <a href="{% url 'create_new_meeting' %}">Create Reunion</a>
                {%endif%}
                <a href="{% url 'logout' %}">Log Out</a>
            </div>
        </div>
    </div>


    <div id="content">
        <div id="profile_window">
            {% csrf_token %}
            <h2>{{ user.username }}</h2>
            <ul>
                <li>Name: {{ user.get_full_name }} </li>
                <li>Email: {{user.email}} </li>
                <li><label for="email_checkbox">Show email:</label><input type="checkbox" {% if user.userprofile.show_email %}checked{% endif %} id="email_checkbox"></input> </li>
                <li>
                    <li>Roles: </li>
                    <ul style="margin-left:10px;padding:5px;" > 
                        {%for role in user.userprofile.role.all%}
                        <li style="padding:2px;">{{role}}</li>
                        {%endfor%}
                    </ul>
                </li>
            </ul>
        </div>
    
        <div class="section">
            <div class="section_title">Meetings</div>
            <div class="section_div">
                {%if not future_meetings%}
                <div> No future meetings planned </div>
                {%endif%}
                {% for meeting in future_meetings %}
                {% for attendance in meeting.attendances.all %}
                {% if attendance.user == request.user %}            
                <a class="meeting_div" href="/meeting/{{ meeting.id }} ">
                    <div class="meeting_name">{{meeting}}</div>
                    <div class="meeting_info">{{meeting.date|date:"d/m/y"}}, {{meeting.time|time:"H:i"}}</div>
                    {% if attendance.attendance %}
                    <div class="meeting_attendance" attendance="true"> will asist  </div>
                    {% else %}
                    <div class="meeting_attendance" attendance="false"> won't asist  </div>
                    {% endif %}
                </a>
                {% endif %}
                {% endfor %}
                {% endfor %}
            </div>
        </div>
        <div class="section">
            <div class="section_title">Past Meetings</div>
            <div class="section_div">
                {% for meeting in past_meetings %}
                {% for attendance in meeting.attendances.all %}
                {% if attendance.user == request.user %}            
                <a class="meeting_div" href="/meeting/{{ meeting.id }} ">
                    <div class="meeting_name">{{meeting}}</div>
                    <div class="meeting_info">{{meeting.date|date:"d/m/y"}}, {{meeting.time|time:"H:i"}}</div>
                </a>
                {% endif %}
                {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>
</body>
</html>

{%endblock%}